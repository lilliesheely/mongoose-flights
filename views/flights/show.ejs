<%- include('../partials/header') %>

<section id="show-page">
    <div>Airline: </div>
    <div><%= flight.airline %></div>
    <div>Airport: </div>
    <div><%= flight.airport %></div>
    <div>Flight No.: </div>
    <div><%= flight.flightNo %></div>
    <div>Departs: </div>
    <div><%= flight.departs %></div>
  </section>


  <form id="add-des-form" method="POST" 
    action="/flights/<%= flight._id %>/destinations">
    <label>Airport
        <select name="airport">

        <% ["AUS", "DFW", "LAX", "SAN", "DEN"].forEach(function(d) { %>
        <% if (flight.airport === d ) { %>
            <% } else if (!flight.destinations.some(destinations => destinations.airport === d)) { %> 
            <option value ="<%= d %>"><%= d %> </option>
            <% } %>
        <% }) %>
          
        </select>
    <label>Arrival:
        <input type="datetime-local" name="arrival" value="">
      </label><br>
      <input type="submit" value="Add Destination">

<% if (flight.destinations.length) { %>
    <table>
        <thead>
          <tr>
            <th>Airport</th>
            <th>Arrival (Date & Time)</th>

          </tr>
        </thead>
        <tbody>       
            <% flight.destinations.forEach(function(f) { %>
                <tr>
                  <td><%= f.airport %></td>
                  <td><%= f.arrival %></td>
                </tr>
              <% }); %>
            </tbody>
          </table>
        <% } else { %>
          <h5>No Additional Stops</h5>
        <% } %>
<%- include('../partials/footer') %>
